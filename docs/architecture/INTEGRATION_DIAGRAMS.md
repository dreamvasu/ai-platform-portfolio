# Integration Flow Diagrams

**Project:** Microservices Integration Visualizations
**Author:** Vasu Kapoor
**Last Updated:** November 3, 2025

---

## Paper Scraping Integration Flow

### Complete End-to-End Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PAPER SCRAPING INTEGRATION FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Admin Triggers Scraping
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin   â”‚
â”‚  User    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ POST /scrape
     â”‚ {
     â”‚   "source": "arxiv",
     â”‚   "days": 7,
     â”‚   "max_results": 50,
     â”‚   "category": "llm"
     â”‚ }
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Paper Scraper Service                â”‚
â”‚    https://paper-scraper....run.app     â”‚
â”‚                                         â”‚
â”‚  1. Receive Request                     â”‚
â”‚  2. Create Job ID: arxiv-1762123331     â”‚
â”‚  3. Return immediately:                 â”‚
â”‚     {                                   â”‚
â”‚       "job_id": "arxiv-1762123331",     â”‚
â”‚       "status": "running"               â”‚
â”‚     }                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ (Background Task Starts)
             â”‚
Step 2: Fetch Papers from arXiv
             â”‚
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  arXiv API   â”‚
      â”‚              â”‚
      â”‚  Query:      â”‚
      â”‚  cat:cs.AI   â”‚
      â”‚  OR cs.LG    â”‚
      â”‚  sortBy:     â”‚
      â”‚  submittedDate
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ XML Response
             â”‚ <feed>
             â”‚   <entry>
             â”‚     <title>...</title>
             â”‚     <abstract>...</abstract>
             â”‚     <author>...</author>
             â”‚   </entry>
             â”‚ </feed>
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Paper Scraper Service                â”‚
â”‚                                         â”‚
â”‚  Step 3: Parse & Categorize             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ For each paper:            â”‚        â”‚
â”‚  â”‚                            â”‚        â”‚
â”‚  â”‚ 1. Extract text from XML   â”‚        â”‚
â”‚  â”‚                            â”‚        â”‚
â”‚  â”‚ 2. Detect category:        â”‚        â”‚
â”‚  â”‚    - "GPT", "LLM" â†’ llm    â”‚        â”‚
â”‚  â”‚    - "RAG", "retrieval"    â”‚        â”‚
â”‚  â”‚      â†’ rag                 â”‚        â”‚
â”‚  â”‚    - "vision", "image"     â”‚        â”‚
â”‚  â”‚      â†’ cv                  â”‚        â”‚
â”‚  â”‚                            â”‚        â”‚
â”‚  â”‚ 3. Calculate relevance:    â”‚        â”‚
â”‚  â”‚    score = 0.5             â”‚        â”‚
â”‚  â”‚    + recency_boost         â”‚        â”‚
â”‚  â”‚    + keyword_match         â”‚        â”‚
â”‚  â”‚                            â”‚        â”‚
â”‚  â”‚ 4. Extract tags:           â”‚        â”‚
â”‚  â”‚    ["transformer",         â”‚        â”‚
â”‚  â”‚     "attention",           â”‚        â”‚
â”‚  â”‚     "fine-tuning"]         â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                         â”‚
â”‚  Step 4: Store in Memory                â”‚
â”‚  papers_db.extend(papers)               â”‚
â”‚                                         â”‚
â”‚  Step 5: Update Job Status              â”‚
â”‚  job.status = "completed"               â”‚
â”‚  job.papers_found = len(papers)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 6: Send Webhook to Django
             â”‚
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Webhook     â”‚
      â”‚  Payload     â”‚
      â”‚              â”‚
      â”‚  POST:       â”‚
      â”‚  /api/webhooks/
      â”‚  scraper-complete/
      â”‚              â”‚
      â”‚  Headers:    â”‚
      â”‚  Authorization:
      â”‚  Bearer      â”‚
      â”‚  {secret}    â”‚
      â”‚              â”‚
      â”‚  Body:       â”‚
      â”‚  {           â”‚
      â”‚    "job_id": "...",
      â”‚    "source": "arxiv",
      â”‚    "papers": [
      â”‚      {        â”‚
      â”‚        "title": "...",
      â”‚        "abstract": "...",
      â”‚        "authors": [...],
      â”‚        "url": "...",
      â”‚        "category": "llm",
      â”‚        "relevance_score": 0.92,
      â”‚        "tags": [...],
      â”‚      }        â”‚
      â”‚    ],         â”‚
      â”‚    "total_papers": 50,
      â”‚    "timestamp": "..."
      â”‚  }            â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 7: Django Receives & Processes
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Django Backend Service               â”‚
â”‚    https://portfolio-backend...run.app  â”‚
â”‚                                         â”‚
â”‚  @api_view(['POST'])                    â”‚
â”‚  @verify_webhook_signature              â”‚
â”‚  def scraper_complete_webhook():        â”‚
â”‚                                         â”‚
â”‚    1. Authenticate                      â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚       â”‚ Extract Bearer tokenâ”‚          â”‚
â”‚       â”‚ Compare with SECRET â”‚          â”‚
â”‚       â”‚ âœ… Valid? Continue  â”‚          â”‚
â”‚       â”‚ âŒ Invalid? 401     â”‚          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                         â”‚
â”‚    2. Create Scraper Job Record        â”‚
â”‚       ScraperJob.objects.create(       â”‚
â”‚         source='arxiv',                â”‚
â”‚         status='completed',            â”‚
â”‚         papers_found=50,               â”‚
â”‚         end_time=now()                 â”‚
â”‚       )                                â”‚
â”‚                                         â”‚
â”‚    3. Process Each Paper               â”‚
â”‚       For paper in papers_data:        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚         â”‚ Extract source_idâ”‚           â”‚
â”‚         â”‚ from URL         â”‚           â”‚
â”‚         â”‚                  â”‚           â”‚
â”‚         â”‚ Convert authors  â”‚           â”‚
â”‚         â”‚ list to string   â”‚           â”‚
â”‚         â”‚                  â”‚           â”‚
â”‚         â”‚ update_or_create:â”‚           â”‚
â”‚         â”‚ - Check if URL   â”‚           â”‚
â”‚         â”‚   exists         â”‚           â”‚
â”‚         â”‚ - Update if yes  â”‚           â”‚
â”‚         â”‚ - Create if new  â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                         â”‚
â”‚       papers_created = 35              â”‚
â”‚       papers_updated = 15              â”‚
â”‚                                         â”‚
â”‚    4. Return Success                   â”‚
â”‚       Response({                       â”‚
â”‚         "status": "success",           â”‚
â”‚         "papers_created": 35,          â”‚
â”‚         "papers_updated": 15           â”‚
â”‚       }, status=201)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 8: Store in Database
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    PostgreSQL (Cloud SQL)               â”‚
â”‚                                         â”‚
â”‚    papers table:                        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚    â”‚ id  | title | abstract  â”‚        â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚    â”‚  1  | Paper 1 | ...     â”‚        â”‚
â”‚    â”‚  2  | Paper 2 | ...     â”‚        â”‚
â”‚    â”‚ ... | ...     | ...     â”‚        â”‚
â”‚    â”‚ 50  | Paper 50| ...     â”‚        â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                         â”‚
â”‚    scraper_jobs table:                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚    â”‚ id | source | papers_foundâ”‚      â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚    â”‚ 1  | arxiv  | 50          â”‚      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 9: Data Available to Frontend
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    REST API Endpoints                   â”‚
â”‚                                         â”‚
â”‚    GET /api/papers/                     â”‚
â”‚    Returns paginated list:              â”‚
â”‚    {                                    â”‚
â”‚      "count": 50,                       â”‚
â”‚      "next": "...",                     â”‚
â”‚      "results": [                       â”‚
â”‚        {                                â”‚
â”‚          "id": 1,                       â”‚
â”‚          "title": "Paper 1",            â”‚
â”‚          "category": "llm",             â”‚
â”‚          "relevance_score": 0.92,       â”‚
â”‚          ...                            â”‚
â”‚        }                                â”‚
â”‚      ]                                  â”‚
â”‚    }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 10: Frontend Displays Papers
             â”‚
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   React      â”‚
      â”‚   Frontend   â”‚
      â”‚              â”‚
      â”‚  Papers Page â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
      â”‚  â”‚ Paper 1 â”‚ â”‚
      â”‚  â”‚ Paper 2 â”‚ â”‚
      â”‚  â”‚ Paper 3 â”‚ â”‚
      â”‚  â”‚  ...    â”‚ â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Timeline:
[0s]     Admin triggers scrape
[0.1s]   Job created, background task starts
[0.1s]   Admin receives job_id
[2-5s]   arXiv API queried and parsed
[5s]     Papers categorized and stored
[5.1s]   Webhook sent to Django
[5.2s]   Django authenticates webhook
[5.5s]   Papers stored in PostgreSQL
[5.5s]   Webhook response sent
[5.5s+]  Papers available via API
```

---

## Document Processing RAG Flow

### Complete RAG Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               DOCUMENT PROCESSING & RAG QUERY FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PART A: Document Ingestion
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 1: User Uploads Document
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ POST /process/text
     â”‚ {
     â”‚   "title": "Kubernetes Guide",
     â”‚   "text": "Kubernetes is a container orchestration platform...",
     â”‚   "metadata": {
     â”‚     "author": "Vasu",
     â”‚     "category": "devops"
     â”‚   }
     â”‚ }
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Document Processor Service             â”‚
â”‚  https://document-processor...run.app   â”‚
â”‚                                         â”‚
â”‚  1. Receive Request                     â”‚
â”‚  2. Create Job                          â”‚
â”‚     job_id = "text-1762123331"          â”‚
â”‚  3. Return immediately:                 â”‚
â”‚     {                                   â”‚
â”‚       "job_id": "text-1762123331",      â”‚
â”‚       "status": "pending"               â”‚
â”‚     }                                   â”‚
â”‚  4. Start Background Task               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 2: Text Chunking
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Intelligent Text Chunking            â”‚
â”‚                                         â”‚
â”‚  Input: 5000 character document         â”‚
â”‚  Config:                                â”‚
â”‚    - chunk_size = 1000                  â”‚
â”‚    - chunk_overlap = 200                â”‚
â”‚                                         â”‚
â”‚  Algorithm:                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ start = 0              â”‚             â”‚
â”‚  â”‚ chunks = []            â”‚             â”‚
â”‚  â”‚                        â”‚             â”‚
â”‚  â”‚ while start < len(text):            â”‚
â”‚  â”‚   end = start + 1000   â”‚             â”‚
â”‚  â”‚                        â”‚             â”‚
â”‚  â”‚   # Smart boundary detection:        â”‚
â”‚  â”‚   Look for:            â”‚             â”‚
â”‚  â”‚   1. "\n\n" (paragraph)â”‚             â”‚
â”‚  â”‚   2. ". " (sentence)   â”‚             â”‚
â”‚  â”‚   3. "! " or "? "      â”‚             â”‚
â”‚  â”‚   within [end-100, end+100]          â”‚
â”‚  â”‚                        â”‚             â”‚
â”‚  â”‚   chunk = text[start:end]            â”‚
â”‚  â”‚   chunks.append({      â”‚             â”‚
â”‚  â”‚     "text": chunk,     â”‚             â”‚
â”‚  â”‚     "metadata": {      â”‚             â”‚
â”‚  â”‚       "chunk_index": i,â”‚             â”‚
â”‚  â”‚       "start_char": start,           â”‚
â”‚  â”‚       "end_char": end, â”‚             â”‚
â”‚  â”‚       "title": "...",  â”‚             â”‚
â”‚  â”‚       ...              â”‚             â”‚
â”‚  â”‚     }                  â”‚             â”‚
â”‚  â”‚   })                   â”‚             â”‚
â”‚  â”‚                        â”‚             â”‚
â”‚  â”‚   start = end - 200    â”‚             â”‚
â”‚  â”‚   # (overlap)          â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                         â”‚
â”‚  Result:                                â”‚
â”‚  - Chunk 0: chars [0-1000]              â”‚
â”‚  - Chunk 1: chars [800-1800]  (overlap) â”‚
â”‚  - Chunk 2: chars [1600-2600]           â”‚
â”‚  - Chunk 3: chars [2400-3400]           â”‚
â”‚  - Chunk 4: chars [3200-4200]           â”‚
â”‚  - Chunk 5: chars [4000-5000]           â”‚
â”‚                                         â”‚
â”‚  Total: 6 chunks with overlap           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 3: Embedding Generation
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ChromaDB Embedding Pipeline          â”‚
â”‚                                         â”‚
â”‚  For each chunk:                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ 1. Take chunk text         â”‚        â”‚
â”‚  â”‚                            â”‚        â”‚
â”‚  â”‚ 2. Pass to embedding model:â”‚        â”‚
â”‚  â”‚    all-MiniLM-L6-v2       â”‚        â”‚
â”‚  â”‚    (sentence-transformers) â”‚        â”‚
â”‚  â”‚                            â”‚        â”‚
â”‚  â”‚ 3. Generate 384-dim vector:â”‚        â”‚
â”‚  â”‚    [0.12, -0.34, 0.56, ...]â”‚        â”‚
â”‚  â”‚                            â”‚        â”‚
â”‚  â”‚ 4. Store in ChromaDB:      â”‚        â”‚
â”‚  â”‚    collection.add(         â”‚        â”‚
â”‚  â”‚      ids=["chunk_0"],      â”‚        â”‚
â”‚  â”‚      documents=[chunk_text],       â”‚
â”‚  â”‚      embeddings=[vector],  â”‚        â”‚
â”‚  â”‚      metadatas=[metadata]  â”‚        â”‚
â”‚  â”‚    )                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                         â”‚
â”‚  ChromaDB automatically:                â”‚
â”‚  - Downloads model on first run         â”‚
â”‚  - Caches model (79.3 MB)               â”‚
â”‚  - Generates embeddings                 â”‚
â”‚  - Stores in persistent directory       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 4: Vector Storage
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ChromaDB Data Structure              â”‚
â”‚                                         â”‚
â”‚  Collection: portfolio_documents        â”‚
â”‚                                         â”‚
â”‚  Storage:                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ chunk_0:                           â”‚â”‚
â”‚  â”‚   id: "chunk_0"                    â”‚â”‚
â”‚  â”‚   document: "Kubernetes is..."     â”‚â”‚
â”‚  â”‚   embedding: [0.12, -0.34, ...]    â”‚â”‚
â”‚  â”‚   metadata: {                      â”‚â”‚
â”‚  â”‚     title: "K8s Guide",            â”‚â”‚
â”‚  â”‚     chunk_index: 0,                â”‚â”‚
â”‚  â”‚     job_id: "text-1762123331"      â”‚â”‚
â”‚  â”‚   }                                â”‚â”‚
â”‚  â”‚                                    â”‚â”‚
â”‚  â”‚ chunk_1:                           â”‚â”‚
â”‚  â”‚   id: "chunk_1"                    â”‚â”‚
â”‚  â”‚   document: "...orchestration..."  â”‚â”‚
â”‚  â”‚   embedding: [-0.22, 0.45, ...]    â”‚â”‚
â”‚  â”‚   metadata: {...}                  â”‚â”‚
â”‚  â”‚                                    â”‚â”‚
â”‚  â”‚ ... (total 6 chunks)               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚  Persistent storage:                    â”‚
â”‚  ./chromadb_data/chroma.sqlite3         â”‚
â”‚  ./chromadb_data/embeddings/            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 5: Job Complete
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Update Job Status                    â”‚
â”‚                                         â”‚
â”‚    jobs[job_id] = {                     â”‚
â”‚      "status": "completed",             â”‚
â”‚      "progress": 100.0,                 â”‚
â”‚      "chunks_processed": 6,             â”‚
â”‚      "total_chunks": 6,                 â”‚
â”‚      "created_at": "...",               â”‚
â”‚      "updated_at": "..."                â”‚
â”‚    }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


PART B: RAG Query
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 1: User Query
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ GET /query?q=how to deploy to kubernetes&k=3
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Document Processor Service             â”‚
â”‚                                         â”‚
â”‚  1. Parse Query Parameters              â”‚
â”‚     query = "how to deploy to kubernetes"
â”‚     k = 3 (top 3 results)               â”‚
â”‚                                         â”‚
â”‚  2. Call vector_store.query()           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 2: Embedding Query
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ChromaDB Query Processing            â”‚
â”‚                                         â”‚
â”‚  1. Convert query to embedding:         â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚     â”‚ "how to deploy to    â”‚            â”‚
â”‚     â”‚  kubernetes"         â”‚            â”‚
â”‚     â”‚         â†“            â”‚            â”‚
â”‚     â”‚  all-MiniLM-L6-v2    â”‚            â”‚
â”‚     â”‚         â†“            â”‚            â”‚
â”‚     â”‚  [0.45, -0.12, ...]  â”‚            â”‚
â”‚     â”‚  (384 dimensions)    â”‚            â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                         â”‚
â”‚  2. Search vector space:                â”‚
â”‚     For each stored chunk:              â”‚
â”‚       Calculate cosine similarity       â”‚
â”‚       between query_embedding and       â”‚
â”‚       chunk_embedding                   â”‚
â”‚                                         â”‚
â”‚  3. Rank by similarity:                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚     â”‚ chunk_3: distance=0.35 â”‚ â† Best  â”‚
â”‚     â”‚ chunk_4: distance=0.42 â”‚          â”‚
â”‚     â”‚ chunk_1: distance=0.48 â”‚          â”‚
â”‚     â”‚ chunk_0: distance=0.65 â”‚          â”‚
â”‚     â”‚ chunk_2: distance=0.72 â”‚          â”‚
â”‚     â”‚ chunk_5: distance=0.80 â”‚          â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                         â”‚
â”‚  4. Return top-k (k=3):                 â”‚
â”‚     results = [chunk_3, chunk_4, chunk_1]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 3: Format Results
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Format Query Response                â”‚
â”‚                                         â”‚
â”‚    {                                    â”‚
â”‚      "query": "how to deploy to k8s",   â”‚
â”‚      "results": [                       â”‚
â”‚        {                                â”‚
â”‚          "id": "chunk_3",               â”‚
â”‚          "text": "To deploy an         â”‚
â”‚           application to Kubernetes,    â”‚
â”‚           create a deployment YAML      â”‚
â”‚           file that specifies...",      â”‚
â”‚          "metadata": {                  â”‚
â”‚            "title": "K8s Guide",        â”‚
â”‚            "chunk_index": 3             â”‚
â”‚          },                             â”‚
â”‚          "distance": 0.35               â”‚
â”‚        },                               â”‚
â”‚        {                                â”‚
â”‚          "id": "chunk_4",               â”‚
â”‚          "text": "The deployment       â”‚
â”‚           consists of pod replicas      â”‚
â”‚           managed by ReplicaSets...",   â”‚
â”‚          "metadata": {...},             â”‚
â”‚          "distance": 0.42               â”‚
â”‚        },                               â”‚
â”‚        {                                â”‚
â”‚          "id": "chunk_1",               â”‚
â”‚          "text": "Kubernetes           â”‚
â”‚           orchestration platform        â”‚
â”‚           manages containerized...",    â”‚
â”‚          "metadata": {...},             â”‚
â”‚          "distance": 0.48               â”‚
â”‚        }                                â”‚
â”‚      ],                                 â”‚
â”‚      "count": 3                         â”‚
â”‚    }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚
Step 4: User Receives Results
             â”‚
             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Frontend   â”‚
      â”‚              â”‚
      â”‚  Display:    â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
      â”‚  â”‚ Result 1â”‚ â”‚
      â”‚  â”‚ ğŸ“„ K8s  â”‚ â”‚
      â”‚  â”‚ Guide   â”‚ â”‚
      â”‚  â”‚         â”‚ â”‚
      â”‚  â”‚ Result 2â”‚ â”‚
      â”‚  â”‚ ğŸ“„ K8s  â”‚ â”‚
      â”‚  â”‚ Best    â”‚ â”‚
      â”‚  â”‚ Practicesâ”‚ â”‚
      â”‚  â”‚         â”‚ â”‚
      â”‚  â”‚ Result 3â”‚ â”‚
      â”‚  â”‚ ğŸ“„ K8s  â”‚ â”‚
      â”‚  â”‚ Intro   â”‚ â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Future Enhancement]
Step 5: Generate Answer with LLM
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    LLM Answer Generation                â”‚
â”‚                                         â”‚
â”‚  Prompt:                                â”‚
â”‚  "Based on these documents:             â”‚
â”‚                                         â”‚
â”‚   Document 1: To deploy an application  â”‚
â”‚   to Kubernetes, create a deployment    â”‚
â”‚   YAML file...                          â”‚
â”‚                                         â”‚
â”‚   Document 2: The deployment consists   â”‚
â”‚   of pod replicas...                    â”‚
â”‚                                         â”‚
â”‚   Document 3: Kubernetes orchestration  â”‚
â”‚   platform...                           â”‚
â”‚                                         â”‚
â”‚   Answer this question:                 â”‚
â”‚   How do I deploy to Kubernetes?        â”‚
â”‚                                         â”‚
â”‚   Provide a clear, concise answer and   â”‚
â”‚   cite the source documents."           â”‚
â”‚                                         â”‚
â”‚  LLM Response:                          â”‚
â”‚  "To deploy to Kubernetes:              â”‚
â”‚   1. Create a deployment YAML file [1]  â”‚
â”‚   2. Specify pod replicas [2]           â”‚
â”‚   3. Use kubectl apply -f deploy.yaml   â”‚
â”‚                                         â”‚
â”‚   Sources:                              â”‚
â”‚   [1] Kubernetes Guide, chunk 3         â”‚
â”‚   [2] K8s Best Practices, chunk 4"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Performance:
- Document ingestion: ~5-10 seconds (includes embedding generation)
- Query processing: ~100-200ms
- ChromaDB search: ~50-100ms
- Total query latency: <300ms
```

---

## Service Communication Patterns

### Pattern 1: Synchronous REST API

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚                    â”‚   Backend    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                 â”‚
     â”‚  GET /api/papers/               â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                 â”‚
     â”‚                                 â”‚ Query DB
     â”‚                                 â”‚ Format response
     â”‚                                 â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚  200 OK                         â”‚
     â”‚  {                              â”‚
     â”‚    "count": 50,                 â”‚
     â”‚    "results": [...]             â”‚
     â”‚  }                              â”‚
     â”‚                                 â”‚

Characteristics:
âœ“ Request-response pattern
âœ“ Client waits for response
âœ“ Ideal for: Data retrieval, CRUD operations
```

### Pattern 2: Asynchronous Webhook

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scraper    â”‚                â”‚    Django    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                               â”‚
       â”‚ Scraping job starts           â”‚
       â”‚ (background task)             â”‚
       â”‚                               â”‚
       â”‚ ... processing ...            â”‚
       â”‚                               â”‚
       â”‚ Job completes                 â”‚
       â”‚                               â”‚
       â”‚  POST /webhooks/scraper-complete/
       â”‚  Authorization: Bearer token  â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                               â”‚
       â”‚                               â”‚ Validate auth
       â”‚                               â”‚ Process papers
       â”‚                               â”‚ Store in DB
       â”‚                               â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚  201 Created                  â”‚
       â”‚  {                            â”‚
       â”‚    "papers_created": 35       â”‚
       â”‚  }                            â”‚
       â”‚                               â”‚
       â”‚ Continue with next job        â”‚
       â”‚                               â”‚

Characteristics:
âœ“ Fire-and-forget pattern
âœ“ Non-blocking operation
âœ“ Eventual consistency
âœ“ Ideal for: Long-running tasks, event notifications
```

### Pattern 3: Background Task Processing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚                â”‚ Document Processor  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                             â”‚
     â”‚  POST /process/text         â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚
     â”‚                             â”‚ Create job
     â”‚                             â”‚ Return immediately
     â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚  {                          â”‚
     â”‚    "job_id": "text-123",    â”‚
     â”‚    "status": "pending"      â”‚
     â”‚  }                          â”‚
     â”‚                             â”‚
     â”‚                             â”‚
     â”‚                             â”‚ [Background]
     â”‚                             â”‚ - Chunk text
     â”‚                             â”‚ - Generate embeddings
     â”‚                             â”‚ - Store in ChromaDB
     â”‚                             â”‚ - Update job status
     â”‚                             â”‚
     â”‚  GET /jobs/text-123         â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚  {                          â”‚
     â”‚    "status": "processing",  â”‚
     â”‚    "progress": 60.0         â”‚
     â”‚  }                          â”‚
     â”‚                             â”‚
     â”‚  ... wait ...               â”‚
     â”‚                             â”‚
     â”‚  GET /jobs/text-123         â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚  {                          â”‚
     â”‚    "status": "completed",   â”‚
     â”‚    "progress": 100.0,       â”‚
     â”‚    "chunks_processed": 6    â”‚
     â”‚  }                          â”‚
     â”‚                             â”‚

Characteristics:
âœ“ Async processing with polling
âœ“ Job status tracking
âœ“ Progress monitoring
âœ“ Ideal for: Heavy computations, I/O-bound tasks
```

### Pattern 4: WebSocket Real-Time Updates

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚                â”‚  Analytics   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                             â”‚
     â”‚  WS /socket.io              â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚
     â”‚  Connection established     â”‚
     â”‚<============================â”‚
     â”‚                             â”‚
     â”‚                             â”‚
     â”‚  POST /events/pageview      â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚
     â”‚                             â”‚ Process event
     â”‚                             â”‚ Store in Redis
     â”‚                             â”‚
     â”‚<============================â”‚
     â”‚  [WebSocket Event]          â”‚
     â”‚  {                          â”‚
     â”‚    "event": "new_pageview", â”‚
     â”‚    "data": {                â”‚
     â”‚      "page": "/projects",   â”‚
     â”‚      "count": 142           â”‚
     â”‚    }                        â”‚
     â”‚  }                          â”‚
     â”‚                             â”‚

Other Client (Dashboard)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚Dashboard â”‚                     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                     â”‚
     â”‚                            â”‚
     â”‚<===========================â”‚
     â”‚  [WebSocket Broadcast]     â”‚
     â”‚  {                         â”‚
     â”‚    "event": "new_pageview",â”‚
     â”‚    "data": {...}           â”‚
     â”‚  }                         â”‚
     â”‚                            â”‚
     â”‚  Update dashboard in real-time

Characteristics:
âœ“ Bidirectional communication
âœ“ Real-time updates
âœ“ Broadcast to multiple clients
âœ“ Ideal for: Live dashboards, notifications, chat
```

---

## Security Flow

### Webhook Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scraper   â”‚                        â”‚   Django    â”‚
â”‚  Service    â”‚                        â”‚   Backend   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                      â”‚
       â”‚ 1. Prepare webhook request           â”‚
       â”‚    - Load WEBHOOK_SECRET from env    â”‚
       â”‚    - Build payload                   â”‚
       â”‚                                      â”‚
       â”‚ 2. Add Authentication Header         â”‚
       â”‚    Authorization: Bearer             â”‚
       â”‚    {WEBHOOK_SECRET}                  â”‚
       â”‚                                      â”‚
       â”‚ 3. Send HTTP POST                    â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
       â”‚    POST /webhooks/scraper-complete/  â”‚
       â”‚    Authorization: Bearer abc123      â”‚
       â”‚    Content-Type: application/json    â”‚
       â”‚    Body: {...}                       â”‚
       â”‚                                      â”‚
       â”‚                                      â”‚ 4. Extract token
       â”‚                                      â”‚    from header
       â”‚                                      â”‚
       â”‚                                      â”‚ 5. Load expected
       â”‚                                      â”‚    WEBHOOK_SECRET
       â”‚                                      â”‚    from env
       â”‚                                      â”‚
       â”‚                                      â”‚ 6. Compare tokens
       â”‚                                      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                      â”‚    â”‚ Match?   â”‚
       â”‚                                      â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚                                      â”‚         â”‚
       â”‚                                      â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
       â”‚                                      â”‚    â”‚  YES    â”‚
       â”‚                                      â”‚    â”‚ Allow   â”‚
       â”‚                                      â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
       â”‚                                      â”‚         â”‚
       â”‚                                      â”‚    7. Process
       â”‚                                      â”‚       webhook
       â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
       â”‚    201 Created                       â”‚
       â”‚    {                                 â”‚
       â”‚      "status": "success"             â”‚
       â”‚    }                                 â”‚
       â”‚                                      â”‚

If token mismatch:
                                              â”‚ 6. Compare tokens
                                              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚    â”‚ Match?   â”‚
                                              â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                              â”‚         â”‚
                                              â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                                              â”‚    â”‚   NO    â”‚
                                              â”‚    â”‚ Reject  â”‚
                                              â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                              â”‚         â”‚
       â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    7. Return
       â”‚    401 Unauthorized                  â”‚       error
       â”‚    {                                 â”‚
       â”‚      "error": "Invalid signature"    â”‚
       â”‚    }                                 â”‚
```

---

**This documentation provides complete visual references for:**
1. End-to-end integration flows
2. Service communication patterns
3. Data processing pipelines
4. Security authentication flows

**Perfect for:**
- Technical presentations
- Case study documentation
- Architecture reviews
- Interview discussions
